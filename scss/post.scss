// Post SCSS for the theme.
// ============================================
// ALIFE Theme - Navigation Bar Customisation
// ============================================

// Define ALIFE brand colours
$alife-green-primary: #40651a;
$alife-green-light: #eaf0e3;
$alife-green-faq: #719834;
$alife-purple: #926896;
$alife-purple-light: #efe8ef;
$alife-background: #ffffff;

// Body and Page Structure
.alife-body {
    position: relative;
    min-height: 100vh;
    background-color: $alife-background;
}

.alife-page-wrapper {
    position: relative;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

.alife-header-extension {
    position: fixed;
    top: -100px;
    left: 0;
    right: 0;
    height: 160px;
    background: $alife-green-light;
    z-index: 1020;
    pointer-events: none;
}

.alife-content {
    background: $alife-background;
}

.frontpage-welcome {
    .welcome-heading {
        font-size: 55px;
        font-weight: 600;
        line-height: 1.2;
        color: $alife-green-primary;

        @media (max-width: 991px) {
            font-size: 48px;
        }

        @media (max-width: 767px) {
            font-size: 36px;
        }

        .alife-brand {
            color: $alife-green-primary;
        }
    }

    // Multicoloured ALIFE logo
    .alife-letter-a {
        color: #669933;
    } // Green
    .alife-letter-l {
        color: $alife-green-primary;
    } // Green Primary
    .alife-letter-i {
        color: #aaaeb0;
    } // Grey
    .alife-letter-f {
        color: #cc3333;
    } // Red
    .alife-letter-e {
        color: $alife-purple;
    } // Purple
}

.frontpage-actions {
    .btn-outline-primary {
        border: 2px solid $alife-green-primary;
        color: $alife-green-primary;
        background: transparent;
        font-weight: 500;
        transition: all 0.3s ease;

        &:hover {
            background: $alife-green-primary;
            color: white;
            border-color: $alife-green-primary;
        }
    }
}

.frontpage-divider {
    border: 0;
    height: 2px;
    background: $alife-green-primary;
    opacity: 0.3;
    margin-top: 2.5rem !important;
    margin-bottom: 1rem !important;
}

.btn {
    padding: 6px 14px !important;
    border-radius: 30px !important;

    // Center icons in buttons
    i.icon {
        vertical-align: middle;
        margin: 0 !important;
    }

    // For icon-only buttons
    &.btn-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;

        i.icon {
            margin: 0 !important;
        }
    }
}

.login {
    a {
        border: 1px solid $alife-green-primary;
        padding: 6px 16px !important;
        border-radius: 30px !important;
        color: $alife-green-primary;
        background: transparent;
        font-weight: 500;
        transition: all 0.3s ease;

        &:hover {
            background: $alife-green-primary;
            color: white;
            border-color: $alife-green-primary;
            text-decoration: none !important;
        }
    }
}

// ============================================
// Search Bar Styling
// ============================================

.input-group {
    // Add gap between input and button
    gap: 0.5rem !important;
    flex-wrap: nowrap !important;

    .form-control,
    input[type="text"].form-control {
        border-radius: 30px !important;
        border-top-right-radius: 30px !important;
        border-bottom-right-radius: 30px !important;
    }

    .input-group-append {
        margin-left: 0 !important;

        .btn,
        button.btn {
            border-radius: 30px !important;
            border-top-left-radius: 30px !important;
            border-bottom-left-radius: 30px !important;
        }
    }
}

// Additional specificity for search forms
form[role="search"],
.simplesearchform {
    .input-group {
        gap: 0.5rem !important;

        input[type="text"] {
            border-radius: 30px !important;
        }

        button[type="submit"] {
            border-radius: 30px !important;
        }
    }
}

// Input focus styling - only outline, no shadow
.form-control:focus,
input[type="text"]:focus {
    border-color: $alife-green-primary !important;
    box-shadow: none !important;
    outline: 2px solid $alife-green-primary !important;
    outline-offset: 0px !important;
}

// ============================================
// ALIFE Sidebar Components
// ============================================

#alife-sidebar-wrapper {
    position: sticky;
    top: 80px; // Below fixed navbar

    @media (max-width: 767px) {
        position: relative;
        top: 0;
    }

    /* @media (min-width: 992px) {
        padding-left: 20px;
    } */
}

#alife-course-wrapper {
    /* @media (min-width: 992px) {
        padding-right: 20px;
    } */
}

// Purple "ALIFE stands for" box
#alife-stands-for {
    background: $alife-purple-light;
    border-radius: 1rem;
    margin-bottom: 20px;

    .card-title {
        color: $alife-purple;
    }

    .alife-features {
        .alife-feature-item {
            padding: 0.4rem 25px;

            .alife-feature-icon {
                flex-shrink: 0;
                width: 32px;
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;

                .alife-icon {
                    width: 32px;
                    height: 32px;
                    object-fit: contain;
                }
            }

            .alife-feature-text {
                flex: 1;
                color: $alife-purple;
                font-weight: 300 !important;
            }
        }
    }
}

// Green FAQ box
#frontpage-faq {
    background: $alife-green-faq;
    border-radius: 1rem;
    transition: all 0.3s ease;
    overflow: hidden;

    &:hover {
        background: $alife-green-primary;
    }

    a {
        display: block;

        &:hover {
            text-decoration: none;
        }
    }

    .card-body {
        min-height: 80px;

        @media (max-width: 767px) {
            min-height: 60px;
        }
    }

    .faq-arrow {
        transition: transform 0.2s ease;
    }

    &:hover .faq-arrow {
        transform: translateX(4px);
    }
}

// ============================================
// Footer Styling
// ============================================

.alife-footer {
    background: $alife-purple !important;
    margin-top: auto !important;
    bottom: 0;
    z-index: 1015;
    min-height: 120px !important;

    .alife-footer-content {
        .footer-nav {
            a {
                color: white !important;
                text-decoration: none;
                font-weight: 500;
                transition: opacity 0.3s ease;

                &:hover {
                    opacity: 0.8;
                    text-decoration: underline !important;
                }
            }
        }
    }
}

.alife-footer-extension {
    position: fixed;
    bottom: -200px;
    left: 0;
    right: 0;
    height: 201px;
    background: $alife-purple !important;
    z-index: 1010;
    pointer-events: none;
}

.drawers {
    .alife-footer,
    .alife-footer-extension {
        display: none !important;
    }
}

// ============================================
// Frontpage Course Cards Styling
// ============================================

// Section heading for "VerfÃ¼gbare Kurse" / "Available Courses"
// This is now handled in #frontpage-course-list and #frontpage-available-course-list

// Course list container - use CSS Grid for proper layout
// The outer wrapper should NOT be grid (it contains the h2)
#frontpage-course-list,
#frontpage-available-course-list {
    // Don't make this grid - it has the h2 inside
    display: block !important;

    // Style the h2 heading
    h2 {
        color: $alife-green-primary;
        font-size: 1.75rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        margin-top: 2rem;
    }

    // The actual courses container (frontpage-course-list-all, etc)
    .frontpage-course-list-all,
    .frontpage-course-list,
    .frontpage-course-list-enrolled,
    > div[class*="course-list"] {
        display: grid !important;
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 1.5rem !important;

        @media (max-width: 991px) {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 1.25rem !important;
        }

        @media (max-width: 767px) {
            grid-template-columns: 1fr !important;
            gap: 1rem !important;
        }
    }
}

// Also handle if these are standalone (not inside the wrapper)
.frontpage-course-list-all,
.frontpage-course-list,
.frontpage-course-list-enrolled,
.course_category_tree .courses {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 1.5rem !important;

    @media (max-width: 991px) {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 1.25rem !important;
    }

    @media (max-width: 767px) {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
    }
}

// Individual course card styling
// Override Boost's default coursebox flex styles
.pagelayout-frontpage .coursebox,
#page-site-index .coursebox,
#frontpage-course-list .coursebox,
#frontpage-available-course-list .coursebox,
.course_category_tree .coursebox,
.block-myoverview .coursebox {
    position: relative;
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: none;
    background: $alife-background;
    border: none !important;
    width: 100%; // Let grid control the width
    margin-bottom: 0 !important; // Grid gap handles spacing
    padding: 0 !important; // Remove all padding

    // Override Boost's flex-direction: column
    display: flex !important;
    flex-direction: column !important;
    height: 100%; // Fill the grid cell
    position: relative;

    // No hover animation on the card itself
    &:hover {
        // Only the arrow will animate
    }

    // Hide the content wrapper completely
    > .content {
        display: none !important;
    }

    // Ensure courseimage-wrapper has no extra space
    .courseimage-wrapper {
        margin: 0 !important;
        padding: 0 !important;
        display: block !important;
        position: relative;
    }

    // Course image container
    .courseimage {
        position: relative;
        width: 100%;
        height: 200px;
        overflow: hidden;
        background: #f0f0f0;
        flex-shrink: 0;

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        // Placeholder for courses without images
        .course-placeholder {
            width: 100%;
            height: 200px;
            background: #f0f0f0;
        }
    }

    // Caret icon circle as HTML element
    .course-caret-circle {
        position: absolute;
        bottom: -25px; // Half of height to center on border
        right: 12px;
        width: 50px;
        height: 50px;
        background: white;
        border-radius: 50%;
        background-image: url([[pix:theme_alife|icons/caret-right_darkgreen]]);
        background-repeat: no-repeat;
        background-position: center;
        background-size: 20px 20px;
        transition:
            background-color 0.3s ease,
            transform 0.2s ease;
        z-index: 100;
    }

    &:hover .course-caret-circle {
        background-color: $alife-green-light;
        transform: translateX(4px);
    }

    // Circular progress indicator for My Courses
    .course-progress-circle {
        position: absolute;
        bottom: -25px;
        right: 12px;
        width: 50px;
        height: 50px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100;

        // Circular progress bar using conic gradient
        &::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                $alife-green-primary 0deg,
                $alife-green-primary calc(var(--progress, 0) * 3.6deg),
                #e0e0e0 calc(var(--progress, 0) * 3.6deg)
            );
            mask: radial-gradient(circle, transparent 60%, black 60%);
            -webkit-mask: radial-gradient(circle, transparent 60%, black 60%);
        }

        .progress-text {
            position: relative;
            z-index: 1;
            font-size: 0.65rem;
            font-weight: 700;
            color: $alife-green-primary;
        }
    }

    // Update progress circle dynamically based on data-progress
    @for $i from 0 through 100 {
        .course-progress-circle[data-progress="#{$i}"] {
            --progress: #{$i};
        }
    }

    // Course info section (bottom part with course shortname)
    > .info {
        background: $alife-green-light !important;
        padding: 3rem 1.25rem 1.5rem 1.25rem !important;
        position: relative;
        flex: 1; // Fill remaining space to bottom
        transition: background-color 0.3s ease;
        z-index: 1; // Lower z-index so circle appears above it

        h3.coursename {
            font-size: 1.1rem;
            font-weight: 400;
            color: $alife-green-primary;
            margin: 0;
            padding-top: 0.5rem;
            transition: color 0.3s ease;

            a {
                color: $alife-green-primary;
                text-decoration: none !important;
                transition: color 0.3s ease;

                &:hover {
                    text-decoration: none !important;
                }
            }
        }
    }

    // Hover effect for green section
    &:hover > .info {
        background: $alife-green-primary !important;

        h3.coursename,
        h3.coursename a {
            color: white !important;
        }
    }

    // Change number badge color on hover
    &:hover .course-number-badge {
        color: white !important;
    }

    // Hide elements we don't want to show
    .summary,
    .coursecat,
    .course-contacts,
    .customfields-container {
        display: none !important;
    }

    .enrolmenticons {
        display: none !important;
    }
}

// Number badge styling - HTML element in green section
.course-number-badge {
    position: absolute;
    top: 0.7rem;
    left: 1.25rem;
    font-size: 2rem;
    font-weight: 700;
    color: $alife-green-primary;
    z-index: 10;
    transition: color 0.3s ease;
}

// ============================================
// My Courses (block_myoverview) Card Styling
// ============================================
// Use same styling as frontpage by applying to .block-myoverview .coursebox

.block-myoverview {
    // Add grid gap between course cards
    .card-grid {
        gap: 1.5rem !important;

        @media (max-width: 991px) {
            gap: 1.25rem !important;
        }

        @media (max-width: 767px) {
            gap: 1rem !important;
        }
    }

    // Remove bottom margin from individual cards since we use grid gap
    .col {
        margin-bottom: 0 !important;
    }

    // Hide the action menu overlay on hover
    .course-action-menu {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        z-index: 110;
    }
}

// ============================================
// Main navbar styling
// ============================================

.navbar {
    height: 60px;
    border-bottom: none !important;
    background-color: $alife-green-light !important;
}

.primary-navigation .nav-link {
    border: none !important;
    border-bottom: none !important;
    box-shadow: none !important;
    text-shadow: none !important;
    text-decoration: none;
    cursor: pointer;

    &:hover {
        color: $alife-green-primary !important;
        background: none !important;
    }

    &.active {
        color: $alife-green-primary !important;
        font-weight: bold;
    }
}

// Logo styling
.navbar-brand {
    display: flex;
    align-items: center;
    font-weight: 600;
    color: $alife-green-primary !important;
    text-decoration: none;

    .logo {
        height: 45px;
        width: auto;
        margin-right: 0.5rem;
    }

    &:hover {
        color: $alife-green-light !important;
        text-decoration: none;
    }
}

// Floating Logo Styling
.floating-logo-container {
    position: fixed;
    top: 25px;
    left: 60px;
    transform: translateX(-50%);
    z-index: 1050;

    .floating-logo-circle {
        display: block;
        width: 70px;
        height: 70px;
        background: white;
        border-radius: 50%;
        box-shadow: 0 3px 5px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        border: 1px solid $alife-green-light;

        &:hover {
            box-shadow: 0 5px 8px rgba(0, 0, 0, 0.2);
            transform: translateY(-1px);
        }

        .floating-logo-img {
            width: 50px;
            height: 50px;
            object-fit: contain;
        }
    }
}

// Adjust main content to account for floating logo
#page-content {
    margin-top: 50px;
}

// Responsive adjustments
@media (max-width: 767px) {
    .floating-logo-container {
        visibility: hidden;
    }
}

@media (min-width: 768px) {
    .navbar-spacing {
        padding-left: 130px;
    }
}

// ============================================
// "Who We Are" Page Styling
// ============================================

.local-alife-whoweare {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 1rem;

    .page-title {
        color: $alife-green-primary;
        font-size: 2.5rem;
        margin-bottom: 3rem;
        text-align: left;
    }

    .team-details-container {
        display: flex;
        flex-direction: column;
        gap: 3rem;
    }

    .team-detail {
        background: $alife-background;
        border: 2px solid $alife-green-light;
        border-radius: 1rem;
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 0;
        align-items: stretch;
    }

    .team-detail-content {
        min-width: 0;
        padding: 2rem;
        display: flex;
        flex-direction: column;
    }

    .team-detail-name {
        color: $alife-green-primary;
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }

    .team-detail-bio {
        color: #333;
        line-height: 1.6;
        margin-bottom: 1rem;
        flex: 1;
    }

    .team-detail-link {
        margin-top: auto;

        a {
            color: $alife-green-primary;
            text-decoration: underline;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;

            .link-arrow-icon {
                width: 14px;
                height: 14px;
                padding: 8px;
                background: $alife-background;
                border: 2px solid $alife-green-primary;
                border-radius: 50%;
                box-sizing: content-box;
                filter: drop-shadow(0 0 0.5px #40651a);
            }

            &:hover {
                opacity: 0.8;
            }
        }
    }

    .team-detail-photo {
        height: 350px;
        width: auto;
        aspect-ratio: 0.85;
        border-radius: 0 1rem 1rem 0;
        overflow: hidden;
        background: #d4ddd0;

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    }

    @media (max-width: 768px) {
        .team-detail {
            grid-template-columns: 1fr;
        }

        .team-detail-content {
            order: 1;
        }

        .team-detail-photo {
            order: 2;
            width: 200px;
            height: 200px;
            aspect-ratio: 1;
            border-radius: 0.5rem;
            margin: 0 auto 2rem auto;
        }
    }
}
